CREATE TABLE [dbo].[Account]
(
	[AccountId] INT NOT NULL PRIMARY KEY IDENTITY, 
	[FirstName] NVARCHAR(100) NOT NULL, 
	[LastName] NVARCHAR(100) NOT NULL
)
GO

CREATE TABLE [dbo].[MeterReading]
(
	[MeterReadingId] INT NOT NULL PRIMARY KEY IDENTITY,
	[AccountId] INT NOT NULL, 
	[ReadingDate] DATETIME NOT NULL, 
	[ReadingValue] INT NOT NULL,
	CONSTRAINT FK_MeterReading_Account FOREIGN KEY (AccountId)
	REFERENCES [dbo].[Account](AccountId)
)
GO

CREATE PROCEDURE [dbo].[spMeterReading_AddMeterReading]
	@accountId int,
	@readingDate datetime,
	@readingValue int
AS
BEGIN
	INSERT INTO [dbo].[MeterReading] (AccountId, ReadingDate, ReadingValue)
	VALUES (@accountId, @readingDate, @readingValue)
END
GO

CREATE PROCEDURE [dbo].[spMeterReading_GetMeterReadingsForAccount]
	@accountId int
AS
BEGIN
	SELECT MeterReadingId, AccountId, ReadingDate, ReadingValue FROM [dbo].[MeterReading] mr
	WHERE mr.AccountId = @accountId
END
GO

CREATE PROCEDURE [dbo].[spMeterReading_GetAllMeterReadings]
AS
BEGIN
	SELECT MeterReadingId, AccountId, ReadingDate, ReadingValue FROM [dbo].[MeterReading] mr
END
GO

CREATE PROCEDURE [dbo].[spAccount_GetByAccountId]
	@accountId int
AS
BEGIN
	SELECT AccountId, FirstName, LastName FROM [dbo].[Account] ac
	WHERE ac.AccountId = @accountId
END
GO

CREATE PROCEDURE [dbo].[spAccount_GetAll]
AS
BEGIN
	SELECT AccountId, FirstName, LastName FROM [dbo].[Account] ac
END
GO

SET IDENTITY_INSERT [dbo].[Account] ON;
GO

INSERT INTO [dbo].[Account] (AccountId, FirstName, LastName)
VALUES (2344,'Tommy','Test'),
(2233,'Barry','Test'),
(8766,'Sally','Test'),
(2345,'Jerry','Test'),
(2346,'Ollie','Test'),
(2347,'Tara','Test'),
(2348,'Tammy','Test'),
(2349,'Simon','Test'),
(2350,'Colin','Test'),
(2351,'Gladys','Test'),
(2352,'Greg','Test'),
(2353,'Tony','Test'),
(2355,'Arthur','Test'),
(2356,'Craig','Test'),
(6776,'Laura','Test'),
(4534,'JOSH','TEST'),
(1234,'Freya','Test'),
(1239,'Noddy','Test'),
(1240,'Archie','Test'),
(1241,'Lara','Test'),
(1242,'Tim','Test'),
(1243,'Graham','Test'),
(1244,'Tony','Test'),
(1245,'Neville','Test'),
(1246,'Jo','Test'),
(1247,'Jim','Test'),
(1248,'Pam','Test');
GO

SET IDENTITY_INSERT [dbo].[Account] OFF;
GO